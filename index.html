<!DOCTYPE html>

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title id="title">$$</title>
  <link rel="stylesheet" type="text/css" href="styles.css" />
  <link rel="shortcut icon" type="image/png" href="./images/icons8-dog-color-32.png">
  <script src="https://kit.fontawesome.com/aabc09496b.js" crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5TE969Z86P"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-5TE969Z86P');
  </script>
</head>

<body>
  <div id="main-loading-icon">
    <i class="fas fa-spinner fa-spin"></i>
  </div>
  <div id="content-div">
    <div class="label4image2">Background Image by rawpixel.com on Freepik <a
        href="https://www.freepik.com/free-vector/seamless-animal-pattern-background-cute-paw-print-vector-illustration_20266394.htm#query=paw&position=14&from_view=search&track=sph"><i
          class="fa fa-link" aria-hidden="true"></i></a></div>
    <div id="container">
      <div id="fg-container">
        <span id="close-button" class="fg-closeButton" ontouchstart="handleFgContainer()"
          onclick="handleFgContainer()">$$</span>
        <section class="fg-message">

          <h2 id="intro-title">$$ </h2>
          <div class="fg-image"></div>
          <p id="intro" class="intro">$$
          </p>

          <div id="qna" class="qna">
            $$
          </div>
        </section>
      </div>

      <div id="refresh-checker">
        <div class="message">
          <div style="display: flex;justify-content: space-around;width: 100%;"><i id="icon" class="fa fa-dog fa-flip"
              aria-hidden="true"></i><i id="icon" class="fa fa-cat fa-flip" aria-hidden="true"></i></div>
          <p id="refresh_message">$$</p>
          <br>
          <span id="refresh_button_yes" class="button-yes" ontouchstart="window.location.reload()"
            onclick="window.location.reload()">$$</span>
          <span id="refresh_button_no" class="button-no" ontouchstart="handleRefreshChecker()"
            onclick="handleRefreshChecker()">$$</span>
        </div>
      </div>


      <div id="refresh-for-language">
        <div class="message">
          <div style="display: flex;justify-content: space-around;width: 100%;"><i id="icon" class="fa fa-dog fa-flip"
              aria-hidden="true"></i><i id="icon" class="fa fa-cat fa-flip" aria-hidden="true"></i></div>
          <p id="refresh_language_message">$$</p>
          <br>
          <span id="refresh_lang_button_yes" class="button-yes" ontouchstart="changeLanguage()"
            onclick="changeLanguage()">$$</span>
          <span id="refresh_lang_button_no" class="button-no" ontouchstart="handleLanguage()"
            onclick="handleLanguage()">$$</span>
        </div>
      </div>
      <div id="chat">
        <header id="bar">
          <p class="title">
            AIm PawPaw
          </p>
          <p class="title__sub">
            AI Messenger for Pet Pals
          </p>
          <i class="fa fa-paw" aria-hidden="true"></i>
          <p class="label4image">Header bgImage by Freepik <a
              href="https://www.freepik.com/free-vector/hand-drawn-pet-sitting-facebook-cover_32874038.htm#query=pets&position=1&from_view=search&track=sph#position=1&query=pets"><i
                class="fa fa-link" aria-hidden="true"></i>
            </a></p>

          <!-- <i class="fa fa-info-circle" aria-hidden="true" onclick="handleFgContainer()"></i> -->
        </header>
        <div id="kakao-ad">
          <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-0vOu1X5BlVRtSPvQ" data-ad-width="320"
            data-ad-height="50"></ins>
          <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
        </div>

        <main id="chat__messages">
          <div class="notice"></div>
          <div class="loading-icon">
            <span class="loading_span">loading..</span>
          </div>
        </main>
        <section id="input">
          <form id="chat-form">
            <textarea id="chat_input" class="chat-input" placeholder="$$" maxlength="100"></textarea>

            <select class="chat-select-species">
              <option id="opt10" value="" disabled selected hidden>
                $$
              </option>
              <option id="opt11" value="$$">$$</option>
              <option id="opt12" value="$$">$$</option>
            </select>

            <select class="chat-select-sex">
              <option id="opt20" value="" disabled selected hidden>
                $$
              </option>
              <option id="opt21" value"$$">$$</option>
              <option id="opt22" value="$$">$$</option>
            </select>

            <select class="chat-select-age">
              <option id="opt30" value="" disabled selected hidden>
                $$
              </option>
              <option id="opt31" value="$">$</option>
              <option id="opt32" value="$"></option>
              <option id="opt33" value="$">$</option>
              <option id="opt34" value="$">$</option>
              <option id="opt35" value="$"></option>
            </select>

            <select class="chat-input-weight">
              <option id="opt40" value="" disabled selected hidden>
                $
              </option>
              <option id="opt41" value="$"></option>
              <option id="opt42" value="$">$</option>
              <option id="opt43" value="$">$</option>
              <option id="opt44" value="$"></option>
              <option id="opt45" value="$">$</option>
              <option id="opt46" value="$">$</option>
            </select>

            <select class="chat-select-neutral">
              <option id="opt50" value="" disabled selected hidden>
                $
              </option>
              <option id="opt51" value="$">$</option>
              <option id="opt52" value="$">$</option>
            </select>

            <select class="chat-select-yesno">
              <option id="opt90" value="" disabled selected hidden>
                $
              </option>
              <option id="opt91" value"$">$</option>
              <option id="opt92" value="">$</option>
            </select>

            <button type="submit" class="input-button"><i style="background-color: rgb(50,50,50);font-size:1.3rem;"
                class="fa-solid fa-paper-plane"></i></button>
            <!-- <button id="chat-submit" type="submit">입력완료</button> -->
          </form>
        </section>
        <footer id="menubar">
          <i id="btnLanguage" class="fa-solid fa-globe" ontouchstart="handleLanguage()" onclick="handleLanguage()"></i>
          <span>|</span>
          <i id="btnRefresh" class=" fa-solid fa-rotate-right" ontouchstart="handleRefreshChecker()"
            onclick="handleRefreshChecker()"></i>
          <span>|</span>
          <i id="btnInformation" class="fa-solid fa-circle-info" onclick="handleFgContainer()"
            ontouchstart="handleFgContainer()"></i>
        </footer>
      </div>
    </div>

  </div>
</body>
<script>



  // window.addEventListener('message', event => {
  //   const receivedData = JSON.parse(event.data);
  //   alert(receivedData);
  //   // debugElement.innerText = "!!!" + receivedData + "XXX"
  // })

  let langMode = ""

  document.addEventListener('DOMContentLoaded', () => {
    const loadingIcon = document.querySelector('#main-loading-icon');
    const contentDiv = document.querySelector('#content-div');

    const hideLoadingIcon = () => {
      loadingIcon.classList.add('hidden');
      contentDiv.style.display = 'block';
    }

    window.addEventListener('load', hideLoadingIcon)

  });

  const updateLanguage = () => {
    const userLanguage = navigator.language || navigator.userLanguage;
    const languageSetting = localStorage.getItem("aimpawpaw.language") || "";

    if ((languageSetting === "" && userLanguage.startsWith("ko")) || (languageSetting === "ko")) {
      langMode = "ko"
      importScript("./language_script/lang_korea.js")
    } else {
      langMode = "en"
      importScript("./language_script/lang_english.js")
    }
  }

  const importScript = (scriptSrc) => {
    const script = document.createElement("script");
    script.src = scriptSrc;
    document.head.appendChild(script);
  }

  updateLanguage();

  const kakaoadElement = document.getElementById('kakao-ad');
  const titleSubElement = document.querySelector('.label4image')
  isApp = localStorage.getItem("aimpawpaw.isapp")
  titleSubElement.innerHTML = titleSubElement.innerHTML + isApp
  console.log(langMode);
  if ((isApp === "yes") && (langMode === "en")) {
    kakaoadElement.style.display = 'none';
    // titleSubElement.innerHTML = titleSubElement.innerHTML + " ."
  }
</script>

</html>